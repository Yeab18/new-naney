<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Na-Ney Fashion - Cart</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      #cartItems {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        padding-top: 2rem;
        padding-left: 8rem;
        justify-content: flex-start;
      }

      .cart-item {
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 10px;
        width: 300px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        padding: 0.6rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        font-size: 0.8rem;
      }

      .cart-item img {
        width: 100%;
        height: 190px;
        object-fit: cover;
        border-radius: 6px;
        margin-bottom: 0.4rem;
      }

      .cart-details {
        width: 100%;
        text-align: left;
        padding: 0.2rem 0;
      }

      .cart-details p {
        margin: 0.2rem 0;
        color: #333;
        font-size: 0.85rem;
        font-weight: 400;
      }

      .cart-quantity {
        width: 40px;
        font-size: 0.95rem;
        padding: 3px;
        margin: 0.3rem 0;
      }

      .cart-item-remove {
        background-color: #ff4d4d;
        color: white;
        border: none;
        padding: 4px 8px;
        margin-left: 28px;
        border-radius: 5px;
        font-size: 0.7rem;
        cursor: pointer;
        margin-top: 0.2rem;
      }

      .cart-item-remove:hover {
        background-color: #d63031;
      }

      .cart-total {
        width: 100%;
        text-align: left;
        font-size: 1.2rem;
        font-weight: bold;
        margin: 2rem 10rem;
        color: #111;
      }

      #clearCartBtn {
        padding: 0.5rem 1rem;
        background-color: #e74c3c;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.85rem;
        margin-left: 13rem;
        margin-bottom: 2rem;
      }

      @media (max-width: 768px) {
        .cart-item {
          width: 45%;
        }
      }

      @media (max-width: 480px) {
        .cart-item {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="menu-toggle" id="menu-toggle">&#9776;</div>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="coats.html">Coats</a></li>
        <li><a href="tops.html">Tops</a></li>
        <li><a href="dresses.html">Dresses</a></li>
        <li><a href="shoes.html">Shoes</a></li>
        <li><a href="bags.html">Bags</a></li>
        <li><a href="pants.html">Pants</a></li>
        <li><a href="accessories.html">Accessories</a></li>
        <li><a href="cart.html" class="active">Cart</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>

    <header>
     <h1>ና-ነይ</h1>
      <p>Your Shopping Cart</p>
    </header>

    <main>
      <section id="cartItems"></section>
      <div id="cartTotal" class="cart-total"></div>
      <button id="clearCartBtn">Clear Cart</button>
    </main>

    <footer>
      <p>
        &copy; 2025 Na-Ney Fashion |
        <a href="https://t.me/LAMROT2121" target="_blank">Telegram</a> |
        <a href="https://www.tiktok.com/@naney.fashion" target="_blank">TikTok</a>
        |
        <a href="tel:+251961434825">Call Us</a>
      </p>
    </footer>

    <script>
      // Mobile menu toggle
      const toggle = document.getElementById("menu-toggle");
      const navUl = document.querySelector("nav ul");
      toggle.addEventListener("click", () => {
        navUl.classList.toggle("open");
      });

      const CART_KEY = "naneyFashionCart";
      const cartItemsSection = document.getElementById("cartItems");
      const cartTotalDiv = document.getElementById("cartTotal");
      const clearCartBtn = document.getElementById("clearCartBtn");

      function getCart() {
        const cart = localStorage.getItem(CART_KEY);
        return cart ? JSON.parse(cart) : [];
      }

      function saveCart(cart) {
        localStorage.setItem(CART_KEY, JSON.stringify(cart));
      }

      function renderCart() {
        const cart = getCart();
        cartItemsSection.innerHTML = "";

        if (cart.length === 0) {
          cartItemsSection.innerHTML = "<p>Your cart is empty.</p>";
          cartTotalDiv.textContent = "";
          clearCartBtn.style.display = "none";
          return;
        }

        clearCartBtn.style.display = "inline-block";
        let totalPrice = 0;

        cart.forEach((item, index) => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "cart-item";

          const img = document.createElement("img");
          img.src = item.image;
          img.alt = item.description;

          const detailsDiv = document.createElement("div");
          detailsDiv.className = "cart-details";

          const descP = document.createElement("p");
          descP.textContent = item.description;

          const sizeP = document.createElement("p");
          sizeP.textContent = item.size ? `Size: ${item.size}` : "";

          const priceP = document.createElement("p");
          const cleanPrice = item.price.replace(/\$/g, '');
          priceP.textContent = `Price: ETB ${cleanPrice}`;

          const quantityLabel = document.createElement("label");
          quantityLabel.textContent = "Quantity: ";
          quantityLabel.htmlFor = `qty-${index}`;

          const quantityInput = document.createElement("input");
          quantityInput.type = "number";
          quantityInput.min = "1";
          quantityInput.value = item.quantity;
          quantityInput.className = "cart-quantity";
          quantityInput.id = `qty-${index}`;
          quantityInput.addEventListener("change", (e) => {
            let val = parseInt(e.target.value);
            if (isNaN(val) || val < 1) val = 1;
            item.quantity = val;
            saveCart(cart);
            renderCart();
          });

          const removeBtn = document.createElement("button");
          removeBtn.className = "cart-item-remove";
          removeBtn.textContent = "Remove";
          removeBtn.addEventListener("click", () => {
            cart.splice(index, 1);
            saveCart(cart);
            renderCart();
          });

          detailsDiv.appendChild(descP);
          detailsDiv.appendChild(sizeP);
          detailsDiv.appendChild(priceP);
          detailsDiv.appendChild(quantityLabel);
          detailsDiv.appendChild(quantityInput);
          detailsDiv.appendChild(removeBtn);

          itemDiv.appendChild(img);
          itemDiv.appendChild(detailsDiv);
          cartItemsSection.appendChild(itemDiv);

          const priceNum = parseFloat(cleanPrice) || 0;
          totalPrice += priceNum * item.quantity;
        });

        cartTotalDiv.textContent = `Total: ETB ${totalPrice.toFixed(2)}`;
      }

      // Clear cart button
      clearCartBtn.addEventListener("click", () => {
        localStorage.removeItem(CART_KEY);
        renderCart();
        alert("Cart has been cleared.");
      });

      document.addEventListener("DOMContentLoaded", renderCart);
    </script>
  </body>
</html>
