<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Na-Ney Fashion - Cart</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav>
      <div class="menu-toggle" id="menu-toggle">&#9776;</div>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="coats.html">Coats</a></li>
        <li><a href="tops.html">Tops</a></li>
        <li><a href="dresses.html">Dresses</a></li>
        <li><a href="shoes.html">Shoes</a></li>
        <li><a href="bags.html">Bags</a></li>
        <li><a href="pants.html">Pants</a></li>
        <li><a href="accessories.html">Accessories</a></li>
        <li><a href="cart.html" class="active">Cart</a></li>
        <li><a href="contact.html">Contact</a></li>
      
      </ul>
    </nav>

    <header>
      <h1>Na-Ney Fashion</h1>
      <p>Your Shopping Cart</p>
    </header>

    <main>
      <section id="cartItems"></section>
      <div id="cartTotal" class="cart-total"></div>
    </main>

    <footer>
      <p>
        &copy; 2025 Na-Ney Fashion |
        <a href="https://t.me/LAMROT2121" target="_blank">Telegram</a> |
        <a href="https://www.tiktok.com/@naney.fashion" target="_blank"
          >TikTok</a
        >
        |
        <a href="tel:+251961434825">Call Us</a>
      </p>
    </footer>

    <script>
      // Mobile menu toggle
      const toggle = document.getElementById("menu-toggle");
      const navUl = document.querySelector("nav ul");
      toggle.addEventListener("click", () => {
        navUl.classList.toggle("open");
      });

      const CART_KEY = "naneyFashionCart";
      const cartItemsSection = document.getElementById("cartItems");
      const cartTotalDiv = document.getElementById("cartTotal");

      function getCart() {
        const cart = localStorage.getItem(CART_KEY);
        return cart ? JSON.parse(cart) : [];
      }

      function saveCart(cart) {
        localStorage.setItem(CART_KEY, JSON.stringify(cart));
      }

      function renderCart() {
        const cart = getCart();
        cartItemsSection.innerHTML = "";

        if (cart.length === 0) {
          cartItemsSection.innerHTML = "<p>Your cart is empty.</p>";
          cartTotalDiv.textContent = "";
          return;
        }

        let totalPrice = 0;

        cart.forEach((item, index) => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "cart-item";

          const img = document.createElement("img");
          img.src = item.image;
          img.alt = item.description;

          const detailsDiv = document.createElement("div");
          detailsDiv.className = "cart-details";

          const descP = document.createElement("p");
          descP.textContent = item.description;

          const sizeP = document.createElement("p");
          sizeP.textContent = item.size ? `Size: ${item.size}` : "";

          const priceP = document.createElement("p");
          priceP.textContent = `Price: ${item.price}`;

          const quantityLabel = document.createElement("label");
          quantityLabel.textContent = "Quantity: ";
          quantityLabel.htmlFor = `qty-${index}`;

          const quantityInput = document.createElement("input");
          quantityInput.type = "number";
          quantityInput.min = "1";
          quantityInput.value = item.quantity;
          quantityInput.className = "cart-quantity";
          quantityInput.id = `qty-${index}`;
          quantityInput.addEventListener("change", (e) => {
            let val = parseInt(e.target.value);
            if (isNaN(val) || val < 1) val = 1;
            item.quantity = val;
            saveCart(cart);
            renderCart();
          });

          const removeBtn = document.createElement("button");
          removeBtn.className = "cart-item-remove";
          removeBtn.textContent = "Remove";
          removeBtn.addEventListener("click", () => {
            cart.splice(index, 1);
            saveCart(cart);
            renderCart();
          });

          detailsDiv.appendChild(descP);
          detailsDiv.appendChild(sizeP);
          detailsDiv.appendChild(priceP);
          detailsDiv.appendChild(quantityLabel);
          detailsDiv.appendChild(quantityInput);
          detailsDiv.appendChild(removeBtn);

          itemDiv.appendChild(img);
          itemDiv.appendChild(detailsDiv);
          cartItemsSection.appendChild(itemDiv);

          // calculate total price
          const priceNum =
            parseFloat(item.price.replace(/[^0-9.-]+/g, "")) || 0;
          totalPrice += priceNum * item.quantity;
        });

        cartTotalDiv.textContent = `Total: $${totalPrice.toFixed(2)}`;
      }

      document.addEventListener("DOMContentLoaded", renderCart);
    </script>
  </body>
</html>
